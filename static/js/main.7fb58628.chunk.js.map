{"version":3,"sources":["components/upload/Upload.js","components/next-upload/NextUpload.js","components/footer/Footer.js","App.js","index.js"],"names":["Upload","photo","setPhoto","className","htmlFor","type","style","display","name","onChange","e","file","target","files","handleUploadFile","id","accept","NextUpload","useState","allImagesWithTypes","setAllImagesWithTypes","currentImageType","setCurrentImageType","useEffect","a","axios","get","headers","response","data","getImages","getImagesWithType","map","item","index","src","alt","onClick","Footer","hideNextUpload","setHideNextUpload","setUploading","onStartAnalysisClick","uuidv4","key","formData","FormData","URL","fields","append","post","url","uploadResponse","console","log","App","uploading","textAlign","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7fb58628.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport \"./upload.css\";\n\nconst Upload = ({ photo, setPhoto }) => {\n  const handleUploadFile = e => {\n    const file = e.target.files[0];\n    setPhoto(file);\n  };\n\n  return (\n    <div className=\"page-item main\">\n      <h3 className=\"title\">Intelligent Fabric Defect Inspection</h3>\n      <div className=\"upload-container\">\n        <div className=\"upload-item\">\n          {/* <div> */}\n          <form className=\"file-upload\">\n            <label className=\"upload-text\">Choose a file to upload</label>\n            <label className=\"upload-btn\" htmlFor=\"fileUpload\">\n              +\n            </label>\n            <input\n              type=\"file\"\n              style={{\n                display: \"none\"\n              }}\n              name=\"fileUpload\"\n              onChange={e => handleUploadFile(e)}\n              id=\"fileUpload\"\n              accept=\".pdf, .jpeg, .png\"\n            />\n            {photo && (\n              <span className=\"files-chosen\">\n                {`${photo.name} selected.`}\n                <br />\n                (Please click on 'Start Analysis' button below!)\n              </span>\n            )}\n          </form>\n          {/* </div> */}\n        </div>\n        <div className=\"upload-item\">\n          <div className=\"batch-upload\">\n            <span className=\"upload-text\">Batch upload</span>\n            <button className=\"upload-btn\">+</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Upload;\n","import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./next-upload.css\";\n\nconst GET_IMAGES_URL =\n  \"https://hymqoub9xb.execute-api.ap-south-1.amazonaws.com/v1/render\";\n\nconst NextUpload = () => {\n  const [allImagesWithTypes, setAllImagesWithTypes] = useState(\"\");\n  const [currentImageType, setCurrentImageType] = useState(\"all\");\n\n  useEffect(() => {\n    const getImages = async () => {\n      const response = await axios.get(GET_IMAGES_URL, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      setAllImagesWithTypes(response.data);\n    };\n    getImages();\n  }, []);\n\n  const getImagesWithType = type => {\n    return (\n      <>\n        {allImagesWithTypes &&\n          allImagesWithTypes[type] &&\n          allImagesWithTypes[type].map((item, index) => {\n            return (\n              <div className=\"image-item\" key={`image-${index}`}>\n                <div className=\"image\">\n                  <span className=\"stain-label\">{type}</span>\n                  <img src={item} alt={`STAIN00203${index}.jpg`} />\n                </div>\n                <div className=\"footer\">\n                  <span className=\"img-icon\"></span>\n                  {`STAIN00203${index}.jpg`}\n                </div>\n              </div>\n            );\n          })}\n      </>\n    );\n  };\n\n  return (\n    <div\n      id=\"uploadedImages\"\n      className=\"uploaded-images-container\"\n      // style={{display: 'none'}}\n    >\n      <header className=\"header\">\n        <span className=\"text\" onClick={() => setCurrentImageType(\"all\")}>\n          All\n        </span>\n        <span className=\"text\" onClick={() => setCurrentImageType(\"stain\")}>\n          Stains\n        </span>\n        <span className=\"text\" onClick={() => setCurrentImageType(\"knot\")}>\n          Knots\n        </span>\n        <span className=\"text\" onClick={() => setCurrentImageType(\"hole\")}>\n          Holes\n        </span>\n        <span className=\"text\" onClick={() => setCurrentImageType(\"slub\")}>\n          Slubs\n        </span>\n      </header>\n\n      <div className=\"image-container\">\n        {(currentImageType === \"hole\" || currentImageType === \"all\") &&\n          getImagesWithType(\"hole\")}\n        {(currentImageType === \"stain\" || currentImageType === \"all\") &&\n          getImagesWithType(\"stain\")}\n        {(currentImageType === \"knot\" || currentImageType === \"all\") &&\n          getImagesWithType(\"knot\")}\n        {(currentImageType === \"slub\" || currentImageType === \"all\") &&\n          getImagesWithType(\"slub\")}\n      </div>\n    </div>\n  );\n};\n\nexport default NextUpload;\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./footer.css\";\nimport { v4 as uuidv4 } from 'uuid';\n\nconst Footer = ({ hideNextUpload, setHideNextUpload, photo, setUploading }) => {\n  // const uploadImage = e => {\n  //   if (photo) {\n  //     setUploading(true);\n  //     // api call\n  //   }\n  // };\n  const GET_FORM_DATA_URL =\n    \"https://hymqoub9xb.execute-api.ap-south-1.amazonaws.com/v1/upload\";\n  const onStartAnalysisClick = async () => {\n    if (photo) {\n      setUploading(true);\n      // api call      \n      const response = await axios.get(\n        `${GET_FORM_DATA_URL}?file=${uuidv4()}.jpg`\n      );\n      const data = response.data;\n      const formData = new FormData();\n      for (let key in data.URL.fields) {\n        formData.append(key, data.URL.fields[key]);\n      }\n      formData.append(\"file\", photo);\n      const uploadResponse = await axios.post(`${data.URL.url}`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      })\n      console.log(uploadResponse);\n      \n      setUploading(false);\n      setHideNextUpload(false);\n    }\n  };\n\n  return (\n    <div className=\"page-item footer\">\n      {hideNextUpload ? (\n        <button\n          id=\"startAnalysis\"\n          type=\"button\"\n          className=\"start-analysis-btn\"\n          onClick={() => onStartAnalysisClick()}\n        >\n          Start Analysis\n          <span className=\"right-arrow\">&rarr;</span>\n        </button>\n      ) : (\n        <button\n          id=\"nextUpload\"\n          className=\"next-upload-btn\"\n          onClick={() => setHideNextUpload(true)}\n        >\n          Next Upload\n          <span className=\"right-arrow\">&rarr;</span>\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default Footer;\n","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport Upload from \"./components/upload/Upload\";\nimport NextUpload from \"./components/next-upload/NextUpload\";\nimport Footer from \"./components/footer/Footer\";\n\nconst App = () => {\n  const [hideNextUpload, setHideNextUpload] = useState(true);\n  const [photo, setPhoto] = useState(null);\n  const [uploading, setUploading] = useState(false);\n\n\n  return (\n    <div className=\"page-container\">\n      <Upload setPhoto={setPhoto} photo={photo} />\n      {!hideNextUpload && <NextUpload />}\n      {uploading && (<span style={{textAlign: 'center'}}>Uploading....</span>)}\n      <Footer\n        photo={photo}\n        setUploading={setUploading}\n        hideNextUpload={hideNextUpload}\n        setHideNextUpload={setHideNextUpload}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}